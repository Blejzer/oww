(function(){angular.module("oneWordWorld").controller("EventController",a);a.$inject=["$rootScope","$scope","socket"];function a(b,d,c){var e;if(b.archive){console.log("archive exists: ",b.archive);e=b.archive.event}else{console.log("archive exists: ",d.archive);e=b.event.event_id}d.options={chart:{type:"pieChart",height:500,x:function(f){return f.a},y:function(f){return f.c},showLabels:true,callback:function(){d3.selectAll(".nvd3.text g").style("fill","white")},duration:500,labelThreshold:0.01,labelSunbeamLayout:true,legend:{margin:{top:5,right:35,bottom:5,left:0}}}};d.$on("$stateChangeSuccess",function(){c.emit("newEventPageLoaded",e)});c.on("eventPageSuccess",function(g){var f=JSON.parse(g);d.globalList=f;d.edata=f});c.on("eventCtnPageSuccess",function(g){var f=[];var i=[];var h=JSON.parse(g);h.forEach(function(j){i=j.ewords;f.push({cont:j.cont,ewords:i})});d.contList=f});c.on("disconnect",function(){console.log("event page socket disconnected");c.removeAllListeners()})}})();