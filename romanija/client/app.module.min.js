(function(){angular.module("authServer",["fileUpload","angularMoment"]).controller("MyCtrl",["Upload","$window","$scope","moment",function(b,e,a,d){var c=this;c.bar=0;c.uploadEvent=function(g,h,f){b.upload({url:"/event",data:{file:g,title:h,week:f}}).then(function(i){if(i.data.error_code===0){e.alert("Success "+i.config.data.file.name+"uploaded. Response: "+i.err_desc);e.location="main"}else{e.alert("an error occured"+i.data.error_code+i.data.err_desc);console.log("resp ",i)}},function(i){e.alert("Error status: "+i.status)},function(i){console.log("evt ",i);var j=parseInt(100*i.loaded/i.total);c.progress="progress: "+j+"% ";c.bar=j})};c.uploadPerson=function(g,h,f){b.upload({url:"/person",data:{file:g,title:h,week:f}}).then(function(i){if(i.data.error_code===0){e.alert("Success "+i.config.data.file.name+"uploaded. Response: "+i.data.err_desc);e.location="main"}else{e.alert("an error occured",i.data.error_code);console.log("resp ",i)}},function(i){e.alert("Error status: "+i.status)},function(i){console.log("evt ",i);var j=parseInt(100*i.loaded/i.total);c.progress="progress: "+j+"% "})};c.submitEvent=function(){console.log("vm.title",c.title);console.log("vm.week",c.week);console.log("vm.upload_form.title",c.upload_form.title.$valid);var f=d(c.week).format("YYYYWW");console.log("test",f);if(c.upload_form.file.$valid&&c.file&&c.upload_form.title.$valid){console.log("valid file");c.uploadEvent(c.file,c.title,f)}};c.submitPerson=function(){console.log("vm.title",c.title);console.log("vm.upload_form.title",c.upload_form.title.$valid);var f=d(c.week).format("YYYYWW");console.log("vm.week",f);if(c.upload_form.file.$valid&&c.file&&c.upload_form.title.$valid){console.log("valid file");c.uploadPerson(c.file,c.title,f)}}}])})();